//========================================================================================================
//
//マウス入力処理[mouse.cpp]
// Author Murata Shinnosuke
//
//========================================================================================================
#include "mouse.h"

//========================================================================================================
//コンストラクタ
//========================================================================================================
Mouse::Mouse()
{
	//メンバ変数を初期化する
	this->m_point = {SCREEN_WIDTH / 2, SCREEN_HEIGHT / 2};   //座標
	this->m_pointOld = m_point;   //前回の座標
	this->m_move = { 0.0f, 0.0f };   //移動量
	this->m_isReset = false;   //マウスのリセットフラグ
}

//========================================================================================================
//デストラクタ
//========================================================================================================
Mouse::~Mouse()
{
}

//========================================================================================================
//初期化処理
//========================================================================================================
HRESULT Mouse::Init(HINSTANCE hInstance, HWND hWnd)
{
	return S_OK;
}

//========================================================================================================
//終了処理
//========================================================================================================
void Mouse::Uninit()
{
	//入力デバイスを破棄する
	Input::Uninit();
}

//========================================================================================================
//更新処理
//========================================================================================================
void Mouse::Update()
{
	//マウスの座標を取得する
	GetCursorPos(&this->m_point);

	//移動量を計算するする
	this->m_move.x = (float)this->m_pointOld.x - this->m_point.x;
	this->m_move.y = (float)this->m_pointOld.y - this->m_point.y;

	//マウスリセットフラグを確認する
	if (this->m_isReset)
	{
		//マウスカーソルの位置をリセットする
		this->ResetPoint();
	}

	//今回のマウス座標を保存する
	GetCursorPos(&this->m_pointOld);
}

//=======================================================================================================
//座標のリセット処理
//=======================================================================================================
void Mouse::ResetPoint()
{
	//座標を真ん中にする
	SetCursorPos(SCREEN_WIDTH / 2, SCREEN_HEIGHT / 2);
}