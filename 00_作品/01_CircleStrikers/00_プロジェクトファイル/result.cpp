//========================================================================================================
//
//リザルトシーン処理[result.cpp]
// Author Murata Shinnosuke
//
//========================================================================================================
#include "result.h"
#include "manager.h"
#include "keyboard.h"
#include "prefab.h"

//========================================================================================================
//コンストラクタ
//========================================================================================================
Result::Result()
{
}

//========================================================================================================
//デストラクタ
//========================================================================================================
Result::~Result()
{
}

//========================================================================================================
//初期化処理
//========================================================================================================
void Result::Init()
{
	//背景を生成する
	Background2DPrefab::Create(Manager::Get()->GetTexture()->Get("result_00.png"));

	//フェードを生成する
	FadePrefab::Create();
}

//========================================================================================================
//終了処理
//========================================================================================================
void Result::Uninit()
{
	//オブジェクトを一括破棄する
	Object::ReleaseAll();
}

//========================================================================================================
//更新処理
//========================================================================================================
void Result::Update()
{
	Keyboard* pKeyboard = Manager::Get()->GetKeyboard();   //キーボード

	//オブジェクトを一括更新する
	Object::UpdateAll();

	if (pKeyboard->GetTrigger(DIK_RETURN))
	{//Enterキーが押された場合
		//終了フラグを立てる
		this->NextScene();
	}

	//終了フラグを確認する
	if (this->GetEnd() == true)
	{//終了フラグが立っている場合
		//リザルト画面に遷移する
		Manager::Get()->SetSceneMode(Scene::MODE::IS_TITLE);

		//処理終了
		return;
	}
}

//========================================================================================================
//描画処理
//========================================================================================================
void Result::Draw()
{
	//オブジェクトを一括描画する
	Object::DrawAll();
}